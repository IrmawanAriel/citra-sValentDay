<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine Love Book</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&amp;family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&amp;family=Lora:ital@0;1&amp;display=swap" rel="stylesheet">
  <style>
    /* Custom Styles */
    .font-romantic { font-family: 'Great Vibes', cursive; }
    .font-elegant { font-family: 'Cormorant Garamond', serif; }
    .font-body { font-family: 'Lora', serif; }

    *, *::before, *::after { box-sizing: border-box; }
    
    /* Book Container */
    .book-wrapper {
      perspective: 2000px;
      transform-style: preserve-3d;
      --book-w: min(92vw, 700px);
      --book-h: clamp(300px, calc(100dvh - 160px), 600px);
      width: var(--book-w);
      height: var(--book-h);
    }

    /* Responsive scaling helpers */
    @media (max-height: 500px) {
      .book-wrapper { --book-h: calc(100dvh - 100px); }
    }
    @media (max-width: 430px) {
      .book-wrapper {
        --book-w: 96vw;
        --book-h: clamp(300px, calc(100dvh - 130px), 580px);
      }
    }

    /* iPhone frame scaling ‚Äî keep proportions like desktop */
    @media (max-width: 430px) {
      .photo-frame.frame-1 { border-width: 2px; padding: 5px; }
      .photo-frame.frame-2 { border-width: 4px; padding: 4px; }
      .photo-frame.frame-3 { border-width: 6px; padding: 3px; }
      .photo-frame.frame-4 { border-width: 3px; padding: 6px; }
      .photo-frame.frame-5 { border-width: 3px; padding: 5px; }
      .photo-frame.frame-6 { border-width: 4px; padding: 5px; }
      .photo-frame.frame-7 { border-width: 2px; padding: 4px; }
      .photo-frame.frame-8 { border-width: 1px; padding: 3px; }
    }

    /* ====== FULL-PAGE ROMANTIC ANIMATED BACKDROP ====== */
    .romantic-scene {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
    }

    /* Soft animated glow orbs */
    .glow-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0;
      animation: orbPulse var(--dur, 6s) var(--delay, 0s) ease-in-out infinite;
    }
    .glow-orb.o1 { width: 320px; height: 320px; top: 8%; left: 5%; background: rgba(251, 191, 213, 0.55); --dur: 7s; --delay: 0s; }
    .glow-orb.o2 { width: 260px; height: 260px; top: 55%; right: 3%; background: rgba(253, 230, 138, 0.30); --dur: 9s; --delay: 1.5s; }
    .glow-orb.o3 { width: 380px; height: 380px; bottom: 5%; left: 25%; background: rgba(244, 143, 177, 0.35); --dur: 8s; --delay: 3s; }
    .glow-orb.o4 { width: 200px; height: 200px; top: 30%; right: 30%; background: rgba(252, 231, 243, 0.6); --dur: 6s; --delay: 2s; }

    @keyframes orbPulse {
      0%, 100% { opacity: 0.25; transform: scale(0.9); }
      50% { opacity: 0.65; transform: scale(1.15); }
    }

    /* Floating hearts ‚Äî continuous from page load */
    .scene-heart {
      position: absolute;
      bottom: -60px;
      opacity: 0;
      animation: sceneFloat var(--dur, 8s) var(--delay, 0s) ease-in-out infinite;
      user-select: none;
      filter: blur(0.5px);
    }
    @keyframes sceneFloat {
      0%   { opacity: 0; transform: translateY(0) rotate(0deg) scale(0.6); }
      15%  { opacity: var(--peak, 0.45); }
      85%  { opacity: var(--peak, 0.45); }
      100% { opacity: 0; transform: translateY(-110vh) rotate(var(--rot, 25deg)) scale(1); }
    }

    /* Drifting petals */
    .scene-petal {
      position: absolute;
      width: var(--sz, 14px);
      height: var(--sz, 14px);
      background: radial-gradient(circle, rgba(244,143,177,0.7), rgba(244,143,177,0) 70%);
      border-radius: 50% 0 50% 50%;
      opacity: 0;
      animation: petalDrift var(--dur, 10s) var(--delay, 0s) linear infinite;
    }
    @keyframes petalDrift {
      0%   { opacity: 0; transform: translate(0, 0) rotate(0deg); }
      10%  { opacity: 0.35; }
      90%  { opacity: 0.3; }
      100% { opacity: 0; transform: translate(var(--dx, 80px), var(--dy, -100vh)) rotate(var(--rot, 360deg)); }
    }

    /* Sparkle dots */
    .scene-sparkle {
      position: absolute;
      width: 4px; height: 4px;
      background: white;
      border-radius: 50%;
      opacity: 0;
      animation: sparkle var(--dur, 3s) var(--delay, 0s) ease-in-out infinite;
    }
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 0.7; transform: scale(1); }
    }

    /* Hyper-realistic layered book shadow */
    .book-shadow {
      position: absolute;
      inset: 0;
      border-radius: 16px;
      z-index: 1;
      pointer-events: none;
    }
    .book-shadow::before {
      content: "";
      position: absolute;
      inset: 4px;
      border-radius: 14px;
      background: rgba(0,0,0,0.22);
      transform: translateY(18px) translateX(12px);
      filter: blur(24px);
    }
    .book-shadow::after {
      content: "";
      position: absolute;
      inset: 12px;
      border-radius: 12px;
      background: rgba(0,0,0,0.12);
      transform: translateY(8px) translateX(4px);
      filter: blur(14px);
    }
    
    .book {
      transform-style: preserve-3d;
      transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
    }
    
    .book.closed {
      transform: rotateY(0deg);
    }
    
    .book.opening {
      animation: bookOpen 1.5s ease-out forwards;
    }
    
    @keyframes bookOpen {
      0% { transform: rotateY(0deg); }
      100% { transform: rotateY(-10deg); }
    }
    
    /* Page Styles */
    .page {
      position: absolute;
      top: 0;
      left: 0;
      transform-style: preserve-3d;
      transform-origin: left center;
      transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
      backface-visibility: hidden;
    }
    
    .page-front, .page-back {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 0 8px 8px 0;
      overflow: visible;
    }
    
    .page-back {
      transform: rotateY(180deg);
    }
    
    .page.flipped {
      transform: rotateY(-180deg);
    }
    
    /* Cover Animation */
    .cover {
      transform-origin: left center;
      transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
      transform-style: preserve-3d;
    }
    
    .cover.opened {
      transform: rotateY(-160deg);
    }

    .cover.opened { pointer-events: none; }
    
    .cover-front, .cover-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 0 12px 12px 0;
      overflow: visible;
    }
    
    .cover-back {
      transform: rotateY(180deg);
    }
    
    /* Hyper-realistic aged paper texture */
    .paper-texture {
      background:
        repeating-linear-gradient(0deg,   rgba(180,150,110,0.03) 0 1px, transparent 1px 3px),
        repeating-linear-gradient(90deg,  rgba(180,150,110,0.02) 0 1px, transparent 1px 4px),
        linear-gradient(135deg, #fef7ed 0%, #fdf0e2 20%, #fef9f3 45%, #fbecd8 70%, #fef7ed 100%);
      box-shadow:
        inset 0 0 80px rgba(139, 90, 43, 0.10),
        inset 0 0 20px rgba(180, 140, 80, 0.06);
      position: relative;
    }
    .paper-texture::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: 0.06;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
      background-size: 200px 200px;
      mix-blend-mode: multiply;
    }
    
    /* Decorative Elements */
    .corner-rose {
      position: absolute;
      width: clamp(40px, 8vw, 80px);
      height: clamp(40px, 8vw, 80px);
      opacity: 0.6;
    }
    
    .corner-rose.top-left {
      top: 6px;
      left: 6px;
      transform: rotate(0deg);
    }
    
    .corner-rose.bottom-right {
      bottom: 6px;
      right: 6px;
      transform: rotate(180deg);
    }

    /* Sticker Styles */
    .sticker {
      position: absolute;
      opacity: 0.85;
      user-select: none;
      filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
    }

    .sticker.small { font-size: clamp(1rem, 3vw, 1.8rem); }
    .sticker.medium { font-size: clamp(1.5rem, 4vw, 2.5rem); }
    .sticker.large { font-size: clamp(2rem, 5vw, 3.5rem); }

    .sticker.bounce { animation: sticker-bounce 3s ease-in-out infinite; }
    .sticker.spin { animation: sticker-spin 4s linear infinite; }
    .sticker.float { animation: sticker-float 3s ease-in-out infinite; }
    .sticker.tilt { animation: sticker-tilt 2.5s ease-in-out infinite; }

    @keyframes sticker-bounce {
      0%, 100% { transform: translateY(0) rotate(-2deg); }
      50% { transform: translateY(-8px) rotate(2deg); }
    }

    @keyframes sticker-spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes sticker-float {
      0%, 100% { transform: translateY(0) translateX(0); }
      25% { transform: translateY(-6px) translateX(3px); }
      50% { transform: translateY(-10px) translateX(0); }
      75% { transform: translateY(-6px) translateX(-3px); }
    }

    @keyframes sticker-tilt {
      0%, 100% { transform: rotate(-3deg); }
      50% { transform: rotate(3deg); }
    }
    
    /* Photo Frame Styles */
    .photo-frame {
      position: relative;
      overflow: hidden;
      display: block;
    }
    
    .photo-frame img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Frame 1 - Classic Gold Border */
    .photo-frame.frame-1 {
      border: 3px solid #d4a574;
      box-shadow: 0 0 0 1px #f5e6d3, 0 0 0 4px #d4a574, 0 4px 20px rgba(139, 90, 43, 0.2);
      padding: 8px;
      border-radius: 4px;
      background: linear-gradient(135deg, #fef7ed, #fff);
    }

    /* Frame 2 - Rustic Wood */
    .photo-frame.frame-2 {
      border: 6px solid #8B6914;
      box-shadow: 0 0 0 2px #f5e6d3, 0 0 0 6px #8B6914, inset 0 0 0 1px #e8d5b7, 0 8px 16px rgba(139, 105, 20, 0.25);
      padding: 6px;
      border-radius: 4px;
      background: linear-gradient(135deg, #fef7ed, #fff8f0);
    }

    /* Frame 3 - Polaroid Style */
    .photo-frame.frame-3 {
      border: 8px solid #fef7ed;
      box-shadow: 0 0 0 1px #d4a574, 0 8px 24px rgba(0, 0, 0, 0.15);
      padding: 4px;
      border-radius: 2px;
      background: white;
      transform: rotate(-2deg);
    }

    /* Frame 4 - Vintage Double Border */
    .photo-frame.frame-4 {
      border: 4px double #c9a959;
      box-shadow: inset 0 0 0 1px #f5e6d3, inset 0 0 0 3px #c9a959, 0 4px 12px rgba(139, 90, 43, 0.15);
      padding: 10px;
      border-radius: 2px;
      background: linear-gradient(135deg, #fef9f3, #fff);
    }

    /* Frame 5 - Silver Elegance */
    .photo-frame.frame-5 {
      border: 4px solid #a8a8b0;
      box-shadow: 0 0 0 2px #e8e8ec, 0 0 20px rgba(168, 168, 176, 0.3), 0 4px 12px rgba(120, 120, 130, 0.15);
      padding: 8px;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(245, 245, 248, 0.6), rgba(255, 255, 255, 0.9));
    }

    /* Frame 6 - Ornate Layered Gold */
    .photo-frame.frame-6 {
      border: 6px solid #d4a574;
      box-shadow: inset 0 0 0 1px #ffeab2, inset 0 0 0 2px #d4a574, inset 0 0 0 4px #ffeab2, 0 6px 18px rgba(139, 90, 43, 0.25);
      padding: 8px;
      border-radius: 3px;
      background: linear-gradient(45deg, #fef9f3, #fffbf7);
    }

    /* Frame 7 - Copper Vintage */
    .photo-frame.frame-7 {
      border: 2px solid #b87333;
      box-shadow: 0 0 0 8px rgba(184, 115, 51, 0.12), 0 10px 30px rgba(139, 90, 43, 0.18);
      padding: 6px;
      border-radius: 8px;
      background: linear-gradient(135deg, #fef7ed, #fff);
    }

    /* Frame 8 - Minimalist Line */
    .photo-frame.frame-8 {
      border: 1px solid #d4a574;
      box-shadow: 0 0 0 8px rgba(212, 165, 116, 0.08), 0 4px 16px rgba(0, 0, 0, 0.1);
      padding: 4px;
      border-radius: 0;
      background: white;
    }
    
    /* Heart Animation */
    .floating-heart {
      position: absolute;
      animation: floatHeart 4s ease-in-out infinite;
      opacity: 0;
    }
    
    @keyframes floatHeart {
      0% {
        transform: translateY(100%) scale(0);
        opacity: 0;
      }
      20% {
        opacity: 0.8;
      }
      80% {
        opacity: 0.6;
      }
      100% {
        transform: translateY(-100%) scale(1);
        opacity: 0;
      }
    }
    
    /* Navigation Arrows */
    .nav-arrow {
      transition: all 0.3s ease;
      opacity: 0.7;
    }
    
    .nav-arrow:hover {
      opacity: 1;
      transform: scale(1.1);
    }
    
    /* Gold Ornament */
    .gold-ornament {
      color: #c9a959;
      text-shadow: 0 1px 2px rgba(201, 169, 89, 0.3);
    }
    
    /* Hyper-realistic book spine with stitching & leather grain */
    .book-spine {
      position: absolute;
      left: 0;
      top: 0;
      width: 22px;
      height: 100%;
      background:
        repeating-linear-gradient(180deg, rgba(255,255,255,0.04) 0 1px, rgba(0,0,0,0.06) 1px 2px),
        linear-gradient(90deg,
          #5c2e0e 0%,
          #7a3b15 15%,
          #a0522d 40%,
          #8b4513 55%,
          #6e3410 78%,
          #5a2a0c 100%);
      border-radius: 12px 0 0 12px;
      box-shadow:
        inset -3px 0 6px rgba(0,0,0,0.4),
        inset 2px 0 4px rgba(255,220,160,0.12),
        2px 0 8px rgba(0,0,0,0.15);
      z-index: 100;
    }
    .book-spine::before {
      content: "";
      position: absolute;
      left: 50%;
      top: 8px;
      bottom: 8px;
      width: 2px;
      transform: translateX(-50%);
      background: repeating-linear-gradient(
        180deg,
        rgba(201,169,89,0.5) 0 4px,
        transparent 4px 8px
      );
      border-radius: 1px;
    }
    .book-spine::after {
      content: "";
      position: absolute;
      left: 0; right: 0;
      top: 0; height: 100%;
      background:
        linear-gradient(180deg, rgba(201,169,89,0.25) 0 6px, transparent 6px 12px, transparent calc(100% - 12px), rgba(201,169,89,0.25) calc(100% - 6px) 100%);
      border-radius: 12px 0 0 12px;
    }
    
    /* Swipe hint animation */
    .swipe-hint {
      animation: swipeHint 2s ease-in-out infinite;
    }
    
    @keyframes swipeHint {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(10px); }
    }
    
    /* Hyper-realistic cover */
    .cover-gradient {
      background:
        repeating-linear-gradient(0deg,   rgba(255,255,255,0.02) 0 1px, transparent 1px 3px),
        repeating-linear-gradient(90deg,  rgba(0,0,0,0.03)       0 1px, transparent 1px 3px),
        linear-gradient(145deg,
          #d14468 0%,
          #b8355a 12%,
          #a02d4e 28%,
          #8b1e3f 50%,
          #751836 68%,
          #6d1633 82%,
          #5a1128 100%);
    }

    .cover-front, .cover-back {
      overflow: visible;
      position: absolute;
    }

    .cover-front::before {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 1;
      opacity: 0.28;
      background:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.6'/%3E%3C/svg%3E"),
        radial-gradient(ellipse 120% 80% at 15% 10%, rgba(255,255,255,0.18), transparent 55%),
        radial-gradient(ellipse 120% 90% at 85% 90%, rgba(0,0,0,0.14), transparent 55%);
      background-size: 150px 150px, 100% 100%, 100% 100%;
      mix-blend-mode: overlay;
    }

    .cover-front::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 2;
      background:
        linear-gradient(90deg, rgba(255,220,180,0.12) 0%, transparent 8%),
        linear-gradient(270deg, rgba(0,0,0,0.10) 0%, transparent 12%),
        linear-gradient(180deg, rgba(255,255,255,0.06) 0%, transparent 20%),
        linear-gradient(0deg, rgba(0,0,0,0.08) 0%, transparent 15%);
    }

    .cover-back::before {
      content: "";
      position: absolute; inset: 0; pointer-events: none;
      opacity: 0.10;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='150' height='150'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.5'/%3E%3C/svg%3E");
      background-size: 150px 150px;
    }
    
    /* Embossed gold vintage border */
    .vintage-border {
      border: 2px solid rgba(201, 169, 89, 0.55);
      box-shadow:
        inset 0 0 0 1px rgba(255,240,200,0.15),
        inset 0 0 0 4px rgba(201, 169, 89, 0.22),
        inset 0 0 0 5px rgba(255,240,200,0.08),
        inset 0 0 0 8px rgba(201, 169, 89, 0.10),
        inset 0 0 30px rgba(0,0,0,0.08);
    }

    .book::before {
      content: "";
      position: absolute;
      right: -3px;
      top: 4px;
      bottom: 4px;
      width: 6px;
      z-index: 99;
      pointer-events: none;
      background:
        repeating-linear-gradient(180deg,
          #f8eed8 0 1px,
          #e8dbc4 1px 2px,
          #f2e6d0 2px 3px
        );
      border-radius: 0 3px 3px 0;
      box-shadow:
        1px 0 2px rgba(0,0,0,0.08),
        inset -1px 0 1px rgba(0,0,0,0.05);
    }
  </style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full font-body"><!-- ====== ROMANTIC ANIMATED SCENE (runs from page load) ====== -->
  <div class="romantic-scene" aria-hidden="true"><!-- Glow orbs -->
   <div class="glow-orb o1"></div>
   <div class="glow-orb o2"></div>
   <div class="glow-orb o3"></div>
   <div class="glow-orb o4"></div><!-- Floating hearts -->
   <div class="scene-heart" style="left:6%;  font-size:28px; --dur:9s;  --delay:0s;   --rot:20deg;  --peak:0.40; color:rgba(244,143,177,0.5);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:18%; font-size:18px; --dur:11s; --delay:2s;   --rot:-15deg; --peak:0.30; color:rgba(251,191,213,0.5);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:32%; font-size:24px; --dur:8s;  --delay:1s;   --rot:30deg;  --peak:0.35; color:rgba(244,143,177,0.45);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:48%; font-size:20px; --dur:12s; --delay:3.5s; --rot:-25deg; --peak:0.28; color:rgba(253,164,196,0.4);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:62%; font-size:30px; --dur:10s; --delay:0.5s; --rot:18deg;  --peak:0.38; color:rgba(244,143,177,0.45);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:78%; font-size:16px; --dur:9s;  --delay:4s;   --rot:-20deg; --peak:0.32; color:rgba(251,191,213,0.5);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:90%; font-size:22px; --dur:11s; --delay:1.8s; --rot:28deg;  --peak:0.36; color:rgba(244,143,177,0.4);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:12%; font-size:14px; --dur:13s; --delay:5s;   --rot:-12deg; --peak:0.25; color:rgba(253,164,196,0.4);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:55%; font-size:26px; --dur:10s; --delay:2.5s; --rot:22deg;  --peak:0.33; color:rgba(244,143,177,0.42);">
    ‚ô•
   </div>
   <div class="scene-heart" style="left:85%; font-size:20px; --dur:8.5s;--delay:3s;   --rot:-18deg; --peak:0.30; color:rgba(251,191,213,0.45);">
    ‚ô•
   </div><!-- Drifting petals -->
   <div class="scene-petal" style="left:10%; top:15%; --sz:16px; --dur:14s; --delay:0s;   --dx:60px;  --dy:-110vh; --rot:400deg;"></div>
   <div class="scene-petal" style="left:25%; top:5%;  --sz:12px; --dur:12s; --delay:2s;   --dx:-40px; --dy:-105vh; --rot:-320deg;"></div>
   <div class="scene-petal" style="left:42%; top:20%; --sz:18px; --dur:16s; --delay:1s;   --dx:80px;  --dy:-115vh; --rot:450deg;"></div>
   <div class="scene-petal" style="left:60%; top:8%;  --sz:10px; --dur:11s; --delay:3.5s; --dx:-50px; --dy:-108vh; --rot:-280deg;"></div>
   <div class="scene-petal" style="left:75%; top:18%; --sz:14px; --dur:13s; --delay:0.5s; --dx:70px;  --dy:-112vh; --rot:360deg;"></div>
   <div class="scene-petal" style="left:88%; top:12%; --sz:11px; --dur:15s; --delay:4s;   --dx:-30px; --dy:-100vh; --rot:-400deg;"></div><!-- Sparkles -->
   <div class="scene-sparkle" style="top:20%; left:15%; --dur:3s;  --delay:0s;"></div>
   <div class="scene-sparkle" style="top:35%; left:80%; --dur:4s;  --delay:1.5s;"></div>
   <div class="scene-sparkle" style="top:65%; left:25%; --dur:3.5s;--delay:2.5s;"></div>
   <div class="scene-sparkle" style="top:50%; left:60%; --dur:2.8s;--delay:0.8s;"></div>
   <div class="scene-sparkle" style="top:75%; left:45%; --dur:3.2s;--delay:3.8s;"></div>
   <div class="scene-sparkle" style="top:15%; left:70%; --dur:4.2s;--delay:1s;"></div>
   <div class="scene-sparkle" style="top:85%; left:55%; --dur:3s;  --delay:2s;"></div>
   <div class="scene-sparkle" style="top:40%; left:40%; --dur:3.8s;--delay:4.5s;"></div>
  </div>
  <div id="app" class="h-full w-full overflow-hidden relative" style="background: linear-gradient(135deg, rgba(252,228,236,0.85) 0%, rgba(248,187,217,0.80) 50%, rgba(244,143,177,0.82) 100%); z-index: 1;">
   <div class="h-full w-full flex flex-col items-center justify-center p-3 md:p-6">
    <div class="book-wrapper relative">
     <div class="book-shadow" aria-hidden="true"></div>
     <div id="book" class="book closed relative w-full h-full" style="z-index: 2;">
      <div class="book-spine"></div>
      <div id="cover" class="cover absolute inset-0 cursor-pointer z-50">
       <div class="cover-front cover-gradient vintage-border rounded-r-xl flex flex-col items-center justify-center" style="padding:clamp(16px,4vw,48px);">
        <div class="sticker medium float" style="top:clamp(4px,3vw,20px);right:clamp(8px,4vw,28px);">
         üåπ
        </div>
        <div class="sticker small tilt" style="bottom:clamp(8px,3vw,24px);left:clamp(8px,4vw,28px);">
         üíê
        </div>
        <div class="sticker small bounce" style="top:clamp(12px,5vw,32px);left:clamp(12px,4vw,32px);">
         ‚ú®
        </div>
        <div class="sticker medium spin" style="bottom:clamp(12px,4vw,32px);right:clamp(12px,5vw,36px);">
         üíï
        </div>
        <svg class="absolute gold-ornament" style="top:clamp(8px,1.5vw,16px);left:clamp(8px,1.5vw,16px);width:clamp(36px,7vw,80px);height:clamp(36px,7vw,80px);" viewbox="0 0 100 100" fill="currentColor">
         <path d="M10,50 Q10,10 50,10 Q30,30 30,50 Q30,70 10,50 M50,10 Q90,10 90,50 Q70,30 50,30 Q30,30 50,10" opacity="0.6" />
        </svg>
        <svg class="absolute gold-ornament rotate-180" style="bottom:clamp(8px,1.5vw,16px);right:clamp(8px,1.5vw,16px);width:clamp(36px,7vw,80px);height:clamp(36px,7vw,80px);" viewbox="0 0 100 100" fill="currentColor">
         <path d="M10,50 Q10,10 50,10 Q30,30 30,50 Q30,70 10,50 M50,10 Q90,10 90,50 Q70,30 50,30 Q30,30 50,10" opacity="0.6" />
        </svg>
        <div style="margin-bottom:clamp(8px,2vh,28px);">
         <svg class="text-pink-200" style="width:clamp(44px,10vw,96px);height:clamp(44px,10vw,96px);" fill="currentColor" viewbox="0 0 24 24">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
         </svg>
        </div>
        <h1 id="cover-title" class="font-romantic text-center text-pink-100" style="font-size:clamp(1.85rem,6.5vw,4.2rem); text-shadow:2px 2px 4px rgba(0,0,0,0.3); margin-bottom:clamp(6px,1.2vh,18px); line-height:1.15;">Our Love Story</h1>
        <div class="flex items-center gap-2" style="margin-bottom:clamp(4px,1vh,16px);">
         <div class="h-px bg-gradient-to-r from-transparent via-amber-300 to-transparent" style="width:clamp(30px,7vw,90px);"></div><span class="text-amber-300" style="font-size:clamp(0.9rem,2vw,1.4rem);">‚ô•</span>
         <div class="h-px bg-gradient-to-r from-transparent via-amber-300 to-transparent" style="width:clamp(30px,7vw,90px);"></div>
        </div>
        <p id="cover-names" class="font-elegant text-pink-200 italic" style="font-size:clamp(1.05rem,2.8vw,1.7rem); margin-bottom:clamp(12px,2.5vh,36px);">Andi &amp; Bella</p><button id="open-btn" class="group relative bg-gradient-to-r from-amber-200 to-amber-300 text-rose-800 font-elegant font-semibold rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105" style="padding:clamp(8px,1.4vh,14px) clamp(20px,4vw,36px); font-size:clamp(0.85rem,2vw,1.2rem);"> <span class="flex items-center gap-2"> <span>Open Our Story</span>
          <svg class="w-4 h-4 md:w-5 md:h-5 swipe-hint" fill="none" stroke="currentColor" viewbox="0 0 24 24">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg></span> </button>
       </div>
       <div class="cover-back paper-texture rounded-r-xl p-4 md:p-6 flex items-center justify-center relative overflow-visible">
        <div class="sticker small float" style="top:clamp(8px,3vw,20px);right:clamp(12px,4vw,28px);">
         üíù
        </div>
        <div class="sticker medium tilt" style="bottom:clamp(12px,3vw,24px);left:clamp(12px,4vw,28px);">
         üéÄ
        </div>
        <div class="text-center">
         <p class="font-elegant text-rose-400 italic" style="font-size:clamp(0.8rem,2vw,1.15rem); line-height:1.6;">"Every love story is beautiful,<br>
           but ours is my favorite."</p>
        </div>
       </div>
      </div>
      <div id="pages-container" class="absolute inset-0 ml-5" style="display: none;"></div>
      <div class="absolute inset-0 paper-texture rounded-r-xl">
       <div class="absolute inset-4 border-2 border-rose-200 rounded-lg opacity-50"></div>
      </div>
     </div><button id="close-btn" class="hidden absolute top-2 right-2 md:top-3 md:right-3 z-50 w-8 h-8 md:w-10 md:h-10 rounded-full bg-white/80 backdrop-blur shadow-lg flex items-center justify-center text-rose-500 hover:bg-rose-50 transition-all">
      <svg class="w-4 h-4 md:w-5 md:h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg></button>
    </div>
    <div id="navigation" class="hidden flex items-center justify-center gap-3 md:gap-4 mt-3 md:mt-4 z-50 flex-shrink-0">
     <button id="prev-btn" class="nav-arrow w-10 h-10 md:w-12 md:h-12 rounded-full bg-white/90 shadow-lg flex items-center justify-center text-rose-500 hover:bg-rose-50 disabled:opacity-30 disabled:cursor-not-allowed">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg></button> <span id="page-indicator" class="font-elegant text-white text-xs md:text-sm bg-rose-400/80 px-3 py-1 rounded-full shadow"> 1 / 5 </span> <button id="next-btn" class="nav-arrow w-10 h-10 md:w-12 md:h-12 rounded-full bg-white/90 shadow-lg flex items-center justify-center text-rose-500 hover:bg-rose-50 disabled:opacity-30 disabled:cursor-not-allowed">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg></button>
    </div>
   </div>
   <div id="hearts-container" class="fixed inset-0 pointer-events-none overflow-hidden" style="display: none;"></div>
  </div>
  <script>
    const defaultConfig = {
      book_title: "Our Love Story",
      couple_names: "Ariel & Citra",
      final_message: "Terimakasih udah baca semuanya, ku tuangkan semua perasaan ku ditulisan-tulisan tersebut. Mungkin tulisan gabisa mengutarakan perasaan ku, tapi aku yakin kita akan hidup senang dalam kasih sayang karena aku tau, cinta kita selalu setara. Semoga kita selalu bersama, semoga kita bisa menikah dan semoga kita akan terus menjadi sepasang jiwa yang selalu menghangatkan. Jangan pernah bosen brantem sama aku ya babby. Happy valentine.üòä‚ù§Ô∏èüòä‚ù§Ô∏èüòä‚ù§Ô∏è"
    };
    
    const pagesData = [
      {
        title: "When We First Met",
        subtitle: "The Beginning of Us",
        frameClass: 'frame-1',
        stickers: ['üíë', '‚ú®', 'üíï', 'üåπ'],
        stickerPositions: [
          { emoji: 'üíë', class: 'medium bounce', style: 'top:5%;right:8%;' },
          { emoji: '‚ú®', class: 'small spin', style: 'top:12%;left:6%;' },
          { emoji: 'üíï', class: 'medium float', style: 'bottom:8%;right:10%;' },
          { emoji: 'üåπ', class: 'small tilt', style: 'bottom:12%;left:8%;' }
        ],
        photos: [
          {
            url: "assets/firstdatebgt.jpeg",
            alt: "First date banget",
            placeholder: "firstdatebgt",
            caption: "Ini first date kita banget banget bangett. Disini kita semua saling terkejut karena mengetahui lebih dekat satu sama lain. Image kita yang awalnya abu-abu perlahan mulai jelas dan kita saling ngerti satu dengan yang lain."
          },
          {
            url: "assets/firstdateOnvib.jpeg",
            alt: "First date on vibe",
            placeholder: "firstdateOnvib",
            caption: "Ini juga first date kita disaat aku samper kamu kebandung, disini bibir aku biru-biru karna gasengaja kepentok üòè. Disini juga aku bener-bener sadar kalau ternyata aku sukaaaaaa bangeett sama bare face kamu wkwkkww."
          }
        ],
        quote: "From the moment I saw you, I knew my heart would never be the same."
      },
      
      {
        title: "My Beautiful Wife",
        subtitle: "Memories i Cherish",
        frameClass: 'frame-2',
        stickers: ['üíë', 'üå∏', 'üíñ', 'üéÄ'],
        stickerPositions: [
          { emoji: 'üå∏', class: 'small float', style: 'top:8%;right:10%;' },
          { emoji: 'üíñ', class: 'medium tilt', style: 'top:15%;left:8%;' },
          { emoji: 'üéÄ', class: 'small bounce', style: 'bottom:10%;right:8%;' },
          { emoji: 'üíê', class: 'medium spin', style: 'bottom:15%;left:10%;' }
        ],
        photos: [
          {
            url: "assets/fotoPalingCute.jpeg",
            alt: "Foto paling cute",
            placeholder: "fotoPalingCute",
            caption: "Menurut aku, disini kamu lucu kaya bocil lagi kasi makan kambing qurban WKWKWKW. gak lah bercanda, aku pilih foto ini karena mau kasih tau kamu, bahwa aku juga sayang banget sama sisi kecil kamu yang iniüòäüíñ."
          },
          {
            url: "assets/keBragaPalingberkesan.jpeg",
            alt: "Ke Braga paling berkesan",
            placeholder: "keBragaPalingberkesan",
            caption: "Ini diaaa, Braga. tempat yang selalu ada memori tentang kamu disetiap sudutnya. Aku inget banget disini karena aku pengen banget ngebuat kamu seneng, akhirnya aku beliin pita dengan sisa-sisa uang yang aku punya.TBH, aku seneng sampai berkaca-kaca karena akhirnya aku bisa kasih sesuatu buat kamu.üíñü•π"
          }
        ],
        quote: "Every moment with you is a treasure I hold close to my heart."
      },
      
      {
        title: "Our Adventures",
        subtitle: "Exploring Life Together",
        frameClass: 'frame-3',
        stickers: ['üéí', 'üåü', 'üíë', 'üé™'],
        stickerPositions: [
          { emoji: 'üéí', class: 'small tilt', style: 'top:10%;right:12%;' },
          { emoji: 'üåü', class: 'medium spin', style: 'top:12%;left:10%;' },
          // { emoji: 'üé™', class: 'small float', style: 'bottom:12%;right:10%;' },
          // { emoji: '‚úàÔ∏è', class: 'medium bounce', style: 'bottom:16%;left:8%;' }
        ],
        photos: [
          {
            url: "assets/wisudabersama.jpeg",
            alt: "Wisuda bersama",
            placeholder: "wisudabersama",
            caption: "Dan akhirnya wisuda. ini jujur, wisuda paling berkesan buat aku wkwkw. kamu mau nemenin aku disaat keluarga ku ga ada dan bahkan mama kamu mau jadi perwakilan orang tua ku. Aku disini juga seneng banget karna kita bisa saling memperkenalkan ke keluarga kita masing-masing dan saling menyatakan kalau kita seriusüíñ."
          },
          {
            url: "assets/melihatCalonIstri.jpeg",
            alt: "Melihat calon istri",
            placeholder: "melihatCalonIstri",
            caption: "Fast-forward kedepan. Akhirnya kita bener-bener berhasil berjuang melawan LDR yang sangat kejam. first day kita ketemu, Itu dalah hari <b>Terindah</b> menurut ku selama kamu di sini. Aku rasa pada saat itu perasaan kita bener-bener ada di puncaknya. aku bahkan gapercaaya, kalau Tuhan ternyata memberikanku kado se-indah <b>'hari itu'</b>. i love u sayang üíñ."
          }
        ],
        quote: "Life is an adventure, and I'm glad I'm on this journey with you."
      },
      
      {
        title: "Best Love Story I've Ever Had",
        subtitle: "A girl to marry.",
        frameClass: 'frame-4',
        stickers: ['üíç', 'üéâ', '‚ú®', 'üåπ'],
        stickerPositions: [
          { emoji: 'üíç', class: 'medium spin', style: 'top:8%;right:10%;' },
          { emoji: 'üéâ', class: 'small float', style: 'top:15%;left:8%;' },
          { emoji: '‚ú®', class: 'medium bounce', style: 'bottom:10%;right:8%;' },
          { emoji: 'üåπ', class: 'small tilt', style: 'bottom:15%;left:10%;' }
        ],
        photos: [
          {
            url: "assets/SeeingYouAsmywife.jpeg",
            alt: "Seeing you as my wife",
            placeholder: "SeeingYouAsmywife",
            caption: "Banyak banget perbedaan dari dalam karakter kita sayang, bahkan terkadang ada beberapa yang 180 derajat wkkww, tapi kamu tau? setiap perbedaan dan kelebihan kita tuh kaya puzzel yang benar-benar saling melengkapi. setiap kekurangan yang kita punya, kita bisa terima semuanya dengan baik,<b> And in that moment, I truly saw you as my wife, Citra sayang. Even if I died, I‚Äôd still find my way back to you and choose you‚Äîagain and again. üòä‚ù§Ô∏èüíï</b>"
          }
        ],
        quote: "Some days are just more magical with you by my side."
      },
      
      {
        isFinalPage: true,
        title: "Happy Valentine's Day",
        subtitle: "My Love ‚ù§Ô∏è",
        frameClass: 'frame-5',
        photoUrl: "assets/loveliestPerson.jpeg",
        photoAlt: "Loveliest person",
        stickers: ['üíï', 'üåπ', 'üíù', '‚ú®'],
        stickerPositions: [
          { emoji: 'üíï', class: 'large float', style: 'top:12%;right:8%;' },
          { emoji: 'üåπ', class: 'medium spin', style: 'top:16%;left:8%;' },
          { emoji: 'üíù', class: 'large bounce', style: 'bottom:12%;right:10%;' },
          { emoji: '‚ú®', class: 'medium tilt', style: 'bottom:18%;left:8%;' }
        ]
      }
    ];
    
    let currentPage = 0;
    let isBookOpen = false;
    let config = { ...defaultConfig };
    
    const roseSVG = `
      <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 15C55 25 65 30 70 25C65 35 70 45 60 45C70 50 70 60 55 55C60 65 55 75 45 65C40 75 30 70 35 60C25 65 20 55 30 50C20 50 20 40 35 45C25 40 30 25 40 35C35 25 45 20 50 15Z" fill="#f9a8c9" opacity="0.7"/>
        <path d="M50 25C53 32 58 35 62 32C58 38 62 44 55 44C62 47 60 55 50 50C54 58 48 65 42 58C38 65 32 60 36 52C28 56 25 48 32 45C24 45 26 38 36 42C30 38 34 28 42 34C38 28 46 24 50 25Z" fill="#f472b6" opacity="0.8"/>
        <circle cx="50" cy="40" r="8" fill="#ec4899"/>
        <path d="M45 85L50 50L55 85C55 90 45 90 45 85Z" fill="#22c55e"/>
        <path d="M50 60C45 55 35 58 38 65" stroke="#22c55e" stroke-width="2" fill="none"/>
        <path d="M50 70C55 65 65 68 62 75" stroke="#22c55e" stroke-width="2" fill="none"/>
      </svg>
    `;
    
    function getDummyPhotoUrl(seed, width = 800, height = 600) {
      const normalized = String(seed ?? 'photo')
        .trim()
        .toLowerCase()
        .replace(/\s+/g, '-')
        .replace(/[^a-z0-9\-]/g, '');
      const safeSeed = encodeURIComponent(normalized || 'photo');
      return `https://picsum.photos/seed/${safeSeed}/${width}/${height}`;
    }

    function generateStickersHTML(stickerPositions) {
      if (!stickerPositions || stickerPositions.length === 0) return '';
      
      return stickerPositions.map(s => 
        `<div class="sticker ${s.class}" style="${s.style}">${s.emoji}</div>`
      ).join('');
    }
    
    function generatePageContent(pageData, pageIndex) {
      if (pageData.isFinalPage) {
        return generateFinalPage(pageData);
      }
      
      const photosHTML = pageData.photos.map((photo, idx) => {
        const seed = `${pageIndex}-${idx}-${photo.placeholder || 'photo'}`;
        const src = photo.url || getDummyPhotoUrl(seed, 900, 675);
        const alt = photo.alt || photo.placeholder || 'Foto';

        return `
          <div class="flex flex-col min-h-0">
            <div class="photo-frame ${pageData.frameClass} w-full overflow-hidden rounded-lg" style="aspect-ratio:4/3; min-height:60px;">
              <img src="${src}" alt="${alt}" loading="lazy" decoding="async" referrerpolicy="no-referrer" />
            </div>
            <p class="font-body text-rose-600 text-center mt-1 italic" style="font-size:clamp(0.7rem,1.4vw,0.85rem);">${photo.caption}</p>
          </div>
        `;
      }).join('');
      
      const photoCount = pageData.photos.length;
      const layoutClass = photoCount === 1
        ? 'flex flex-col'
        : photoCount === 2
          ? 'grid grid-cols-2 gap-2 md:gap-3'
          : 'grid grid-cols-3 gap-2';
      
      return `
        <div class="h-full flex flex-col relative overflow-visible" style="padding:clamp(14px,3vw,28px); padding-top:clamp(10px,2vw,24px);">
          ${generateStickersHTML(pageData.stickerPositions)}

          <div class="corner-rose top-left opacity-40">${roseSVG}</div>
          <div class="corner-rose bottom-right opacity-40">${roseSVG}</div>
          
          <div class="text-center flex-shrink-0 relative z-10" style="margin-bottom:clamp(4px,1.2vh,20px);">
            <h2 class="font-romantic text-rose-500" style="font-size:clamp(1.3rem,3.5vw,2.2rem); line-height:1.2;">${pageData.title}</h2>
            <p class="font-elegant text-rose-400 italic" style="font-size:clamp(0.75rem,1.6vw,1rem);">${pageData.subtitle}</p>
            <div class="flex items-center justify-center gap-1 mt-1">
              <div class="h-px bg-gradient-to-r from-transparent via-rose-300 to-transparent" style="width:clamp(16px,5vw,64px);"></div>
              <span class="text-rose-300" style="font-size:clamp(0.65rem,1.2vw,0.85rem);">‚úø</span>
              <div class="h-px bg-gradient-to-r from-transparent via-rose-300 to-transparent" style="width:clamp(16px,5vw,64px);"></div>
            </div>
          </div>
          
          <div class="flex-1 min-h-0 ${photoCount === 1 ? 'flex flex-col mx-auto w-full' : layoutClass} relative z-10" style="${photoCount === 1 ? 'max-width:min(100%,320px);' : ''}">
            ${photosHTML}
          </div>
          
          <div class="text-center flex-shrink-0 relative z-10" style="margin-top:clamp(4px,1vh,16px);">
            <p class="font-body text-rose-400 italic" style="font-size:clamp(0.65rem,1.3vw,0.85rem);">"${pageData.quote}"</p>
          </div>
        </div>
      `;
    }
    
    function generateFinalPage(pageData) {
      const finalSrc = pageData.photoUrl || getDummyPhotoUrl('final-special', 600, 600);
      const finalAlt = pageData.photoAlt || 'Foto spesial';
      return `
        <div class="h-full flex flex-col items-center justify-center relative overflow-visible" style="padding:clamp(14px,3vw,36px);">
          ${generateStickersHTML(pageData.stickerPositions)}

          <div class="absolute inset-0 opacity-10 pointer-events-none">
            <div class="absolute" style="top:8%;left:8%;font-size:clamp(1.5rem,5vw,3.5rem);">‚ù§Ô∏è</div>
            <div class="absolute" style="top:16%;right:14%;font-size:clamp(1rem,3.5vw,2.5rem);">üíï</div>
            <div class="absolute" style="bottom:16%;left:14%;font-size:clamp(1.2rem,4vw,3rem);">üíó</div>
            <div class="absolute" style="bottom:8%;right:10%;font-size:clamp(1rem,3.5vw,2.5rem);">üíñ</div>
          </div>
          
          <div class="corner-rose top-left">${roseSVG}</div>
          <div class="corner-rose bottom-right">${roseSVG}</div>
          
          <div class="photo-frame ${pageData.frameClass} rounded-full overflow-hidden flex-shrink-0 relative z-10" style="width:clamp(64px,16vw,180px); height:clamp(64px,16vw,180px); margin-bottom:clamp(6px,1.5vh,20px);">
            <img src="${finalSrc}" alt="${finalAlt}" loading="lazy" decoding="async" referrerpolicy="no-referrer" />
          </div>
          
          <h2 class="font-romantic text-rose-500 text-center relative z-10" style="font-size:clamp(1.2rem,4vw,3rem); line-height:1.2; margin-bottom:clamp(2px,0.5vh,8px);">
            Happy Valentine's Day
          </h2>
          <p class="font-elegant text-rose-400 italic relative z-10" style="font-size:clamp(0.85rem,2.2vw,1.4rem); margin-bottom:clamp(6px,1.2vh,20px);">My Love ‚ù§Ô∏è</p>
          
          <div class="w-full bg-white/50 rounded-2xl shadow-inner relative z-10 overflow-y-auto" style="max-width:min(100%,400px); padding:clamp(6px,1.5vw,20px); max-height:clamp(60px,18vh,180px);">
            <p id="final-message-text" class="font-body text-rose-600 text-center leading-relaxed" style="font-size:clamp(0.7rem,1.4vw,0.9rem);">
              ${config.final_message}
            </p>
          </div>
          
          <div class="text-center flex-shrink-0 relative z-10" style="margin-top:clamp(4px,1vh,20px);">
            <p class="font-romantic text-rose-400" style="font-size:clamp(0.9rem,2.8vw,1.75rem);">With All My Love,</p>
            <p id="final-names" class="font-elegant text-rose-500 italic" style="font-size:clamp(0.8rem,1.8vw,1.2rem); margin-top:2px;">${config.couple_names}</p>
          </div>
        </div>
      `;
    }
    
    function createPages() {
      const container = document.getElementById('pages-container');
      container.innerHTML = '';
      
      pagesData.forEach((pageData, index) => {
        const page = document.createElement('div');
        page.className = 'page';
        page.style.zIndex = pagesData.length - index;
        page.style.width = '100%';
        page.style.height = '100%';
        page.dataset.index = index;
        
        const front = document.createElement('div');
        front.className = 'page-front paper-texture';
        front.innerHTML = generatePageContent(pageData, index);
        
        const back = document.createElement('div');
        back.className = 'page-back paper-texture';
        if (index < pagesData.length - 1) {
          back.innerHTML = `
            <div class="h-full flex items-center justify-center opacity-30">
              <div class="text-center">
                <span class="text-6xl">üìñ</span>
                <p class="font-elegant text-rose-400 mt-2">Halaman ${index + 2}</p>
              </div>
            </div>
          `;
        } else {
          back.innerHTML = `
            <div class="h-full flex items-center justify-center">
              <div class="text-center">
                <span class="text-4xl mb-2">üíù</span>
                <p class="font-romantic text-2xl text-rose-400">The End</p>
                <p class="font-elegant text-rose-300 text-sm mt-2 italic">Our story continues...</p>
              </div>
            </div>
          `;
        }
        
        page.appendChild(front);
        page.appendChild(back);
        container.appendChild(page);
      });
    }
    
    function updatePageIndicator() {
      document.getElementById('page-indicator').textContent = `${currentPage + 1} / ${pagesData.length}`;
      document.getElementById('prev-btn').disabled = currentPage === 0;
      document.getElementById('next-btn').disabled = currentPage === pagesData.length - 1;
    }
    
    function flipToPage(targetPage) {
      const pages = document.querySelectorAll('.page');
      
      pages.forEach((page, index) => {
        if (index < targetPage) {
          page.classList.add('flipped');
        } else {
          page.classList.remove('flipped');
        }
      });
      
      currentPage = targetPage;
      updatePageIndicator();
      
      if (currentPage === pagesData.length - 1) {
        showFloatingHearts();
      } else {
        hideFloatingHearts();
      }
    }
    
    function createFloatingHearts() {
      const container = document.getElementById('hearts-container');
      container.innerHTML = '';
      
      const hearts = ['‚ù§Ô∏è', 'üíï', 'üíó', 'üíñ', 'üíù', 'üíò', '‚ô•Ô∏è'];
      
      for (let i = 0; i < 20; i++) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
        heart.style.animationDelay = Math.random() * 4 + 's';
        heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
        container.appendChild(heart);
      }
    }
    
    function showFloatingHearts() {
      const container = document.getElementById('hearts-container');
      container.style.display = 'block';
      createFloatingHearts();
    }
    
    function hideFloatingHearts() {
      document.getElementById('hearts-container').style.display = 'none';
    }
    
    function openBook() {
      if (isBookOpen) return;
      
      isBookOpen = true;
      const cover = document.getElementById('cover');
      const pagesContainer = document.getElementById('pages-container');
      const navigation = document.getElementById('navigation');
      const closeBtn = document.getElementById('close-btn');
      
      cover.classList.add('opened');
      
      setTimeout(() => {
        pagesContainer.style.display = 'block';
        navigation.classList.remove('hidden');
        closeBtn.classList.remove('hidden');
        updatePageIndicator();
      }, 800);
    }
    
    function closeBook() {
      isBookOpen = false;
      currentPage = 0;
      
      const cover = document.getElementById('cover');
      const pagesContainer = document.getElementById('pages-container');
      const navigation = document.getElementById('navigation');
      const closeBtn = document.getElementById('close-btn');
      
      document.querySelectorAll('.page').forEach(page => page.classList.remove('flipped'));
      
      navigation.classList.add('hidden');
      closeBtn.classList.add('hidden');
      hideFloatingHearts();
      
      setTimeout(() => {
        pagesContainer.style.display = 'none';
        cover.classList.remove('opened');
      }, 100);
    }
    
    let touchStartX = 0;
    let touchEndX = 0;
    
    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchStartX - touchEndX;
      
      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0 && currentPage < pagesData.length - 1) {
          flipToPage(currentPage + 1);
        } else if (diff < 0 && currentPage > 0) {
          flipToPage(currentPage - 1);
        }
      }
    }
    
    function applyConfig() {
      document.getElementById('cover-title').textContent = config.book_title;
      document.getElementById('cover-names').textContent = config.couple_names;
      
      const finalMessage = document.getElementById('final-message-text');
      if (finalMessage) {
        finalMessage.textContent = config.final_message;
      }
      
      const finalNames = document.getElementById('final-names');
      if (finalNames) {
        finalNames.textContent = config.couple_names;
      }
    }
    
    function init() {
      createPages();
      
      document.getElementById('open-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        openBook();
      });
      
      document.getElementById('cover').addEventListener('click', openBook);
      document.getElementById('close-btn').addEventListener('click', closeBook);
      
      document.getElementById('prev-btn').addEventListener('click', () => {
        if (currentPage > 0) flipToPage(currentPage - 1);
      });
      
      document.getElementById('next-btn').addEventListener('click', () => {
        if (currentPage < pagesData.length - 1) flipToPage(currentPage + 1);
      });
      
      const pagesContainer = document.getElementById('pages-container');
      pagesContainer.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      }, { passive: true });
      
      pagesContainer.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      }, { passive: true });
      
      document.addEventListener('keydown', (e) => {
        if (!isBookOpen) {
          if (e.key === 'Enter' || e.key === ' ') {
            openBook();
          }
          return;
        }
        
        if (e.key === 'ArrowRight' || e.key === ' ') {
          if (currentPage < pagesData.length - 1) flipToPage(currentPage + 1);
        } else if (e.key === 'ArrowLeft') {
          if (currentPage > 0) flipToPage(currentPage - 1);
        } else if (e.key === 'Escape') {
          closeBook();
        }
      });
      
      pagesContainer.addEventListener('click', (e) => {
        const rect = pagesContainer.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const halfWidth = rect.width / 2;
        
        if (clickX > halfWidth && currentPage < pagesData.length - 1) {
          flipToPage(currentPage + 1);
        } else if (clickX <= halfWidth && currentPage > 0) {
          flipToPage(currentPage - 1);
        }
      });
      
      applyConfig();
    }
    
    const elementConfig = {
      defaultConfig: defaultConfig,
      
      onConfigChange: async (newConfig) => {
        config = { ...defaultConfig, ...newConfig };
        applyConfig();
        
        if (isBookOpen && currentPage === pagesData.length - 1) {
          const pages = document.querySelectorAll('.page');
          const lastPage = pages[pages.length - 1];
          if (lastPage) {
            const front = lastPage.querySelector('.page-front');
            if (front) {
              front.innerHTML = generateFinalPage(pagesData[pagesData.length - 1]);
            }
          }
        }
      },
      
      mapToCapabilities: (cfg) => ({
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      }),
      
      mapToEditPanelValues: (cfg) => new Map([
        ['book_title', cfg.book_title || defaultConfig.book_title],
        ['couple_names', cfg.couple_names || defaultConfig.couple_names],
        ['final_message', cfg.final_message || defaultConfig.final_message]
      ])
    };
    
    if (window.elementSdk) {
      window.elementSdk.init(elementConfig);
    }
    
    init();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ce5eba261d6fde6',t:'MTc3MTE3MDIwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>